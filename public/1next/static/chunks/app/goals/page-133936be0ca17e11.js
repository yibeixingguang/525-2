(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639],{162:function(e,t,r){Promise.resolve().then(r.bind(r,2241)),Promise.resolve().then(r.bind(r,4335))},2241:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var n=r(7437),a=r(2265),i=r(2381),d=r(9820),s=r(4079);let o=["人生规划","短期任务","学习计划","健康目标","娱乐活动","其他"];function l(){let{addTimeGoal:e}=(0,s.L)(),[t,r]=(0,a.useState)({title:"",description:"",category:o[0],dueDate:"",reminderFrequency:"once",countdownDays:7}),l=e=>{let{name:t,value:n}=e.target;r(e=>({...e,[t]:n}))};return(0,n.jsxs)(d.Zb,{children:[(0,n.jsx)(d.Ol,{children:(0,n.jsx)(d.ll,{children:"创建新的时间目标"})}),(0,n.jsx)(d.aY,{children:(0,n.jsxs)("form",{onSubmit:n=>{n.preventDefault(),e({title:t.title,description:t.description,category:t.category,dueDate:new Date(t.dueDate),reminderFrequency:t.reminderFrequency,countdownDays:"countdown"===t.reminderFrequency?Number(t.countdownDays):void 0}),r({title:"",description:"",category:o[0],dueDate:"",reminderFrequency:"once",countdownDays:7})},className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium",children:"目标标题"}),(0,n.jsx)("input",{id:"title",name:"title",value:t.title,onChange:l,className:"w-full rounded-md border border-input bg-background px-3 py-2",required:!0})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium",children:"描述（可选）"}),(0,n.jsx)("textarea",{id:"description",name:"description",value:t.description,onChange:l,rows:3,className:"w-full rounded-md border border-input bg-background px-3 py-2"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium",children:"分类"}),(0,n.jsx)("select",{id:"category",name:"category",value:t.category,onChange:l,className:"w-full rounded-md border border-input bg-background px-3 py-2",children:o.map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{htmlFor:"dueDate",className:"block text-sm font-medium",children:"截止日期"}),(0,n.jsx)("input",{id:"dueDate",name:"dueDate",type:"date",value:t.dueDate,onChange:l,className:"w-full rounded-md border border-input bg-background px-3 py-2",required:!0})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{htmlFor:"reminderFrequency",className:"block text-sm font-medium",children:"提醒频率"}),(0,n.jsxs)("select",{id:"reminderFrequency",name:"reminderFrequency",value:t.reminderFrequency,onChange:l,className:"w-full rounded-md border border-input bg-background px-3 py-2",children:[(0,n.jsx)("option",{value:"once",children:"一次性提醒"}),(0,n.jsx)("option",{value:"daily",children:"每日提醒"}),(0,n.jsx)("option",{value:"countdown",children:"倒计时提醒"})]})]}),"countdown"===t.reminderFrequency&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{htmlFor:"countdownDays",className:"block text-sm font-medium",children:"提前提醒天数"}),(0,n.jsx)("input",{id:"countdownDays",name:"countdownDays",type:"number",min:1,max:30,value:t.countdownDays,onChange:l,className:"w-full rounded-md border border-input bg-background px-3 py-2"})]}),(0,n.jsx)(d.eW,{className:"px-0 pt-4",children:(0,n.jsx)(i.z,{type:"submit",children:"创建目标"})})]})})]})}},4335:function(e,t,r){"use strict";r.d(t,{default:function(){return c}});var n=r(7437),a=r(2265),i=r(2381),d=r(9820),s=r(4079),o=r(3448),l=r(3287);function c(){let{timeGoals:e,updateTimeGoal:t,deleteTimeGoal:r}=(0,s.L)(),[c,u]=(0,a.useState)("all"),m=e.filter(e=>"all"===c||("completed"===c?e.completed:"active"===c?!e.completed:e.category===c)),f=["all","active","completed",...Array.from(new Set(e.map(e=>e.category)))],p=r=>{let n=e.find(e=>e.id===r);n&&t(r,{completed:!n.completed})},g=e=>{let t=new Date;return Math.ceil((new Date(e).getTime()-t.getTime())/864e5)};return(0,n.jsxs)(d.Zb,{children:[(0,n.jsxs)(d.Ol,{children:[(0,n.jsx)(d.ll,{children:"您的时间目标"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:f.map(e=>(0,n.jsx)(i.z,{variant:c===e?"default":"outline",size:"sm",onClick:()=>u(e),className:"capitalize",children:e},e))})]}),(0,n.jsx)(d.aY,{children:0===m.length?(0,n.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"all"===c?"还没有创建任何目标，开始添加一个吧!":"没有符合当前筛选条件的目标。"}):(0,n.jsx)("ul",{className:"space-y-3",children:m.map(e=>{let t=g(e.dueDate),a=t<0&&!e.completed;return(0,n.jsx)(l.E.li,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-md border ".concat(e.completed?"bg-green-50 dark:bg-green-900/10 border-green-200 dark:border-green-900/20":a?"bg-red-50 dark:bg-red-900/10 border-red-200 dark:border-red-900/20":"bg-background border-border"),children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("h3",{className:"font-medium ".concat(e.completed?"line-through text-muted-foreground":""),children:e.title}),(0,n.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-primary/10",children:e.category})]}),e.description&&(0,n.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description}),(0,n.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground mt-2",children:[(0,n.jsxs)("span",{children:["到期日: ",(0,o.SD)(e.dueDate)]}),(0,n.jsx)("span",{className:"mx-2",children:"•"}),(0,n.jsx)("span",{className:a?"text-red-500":"",children:e.completed?"已完成":a?"已逾期 ".concat(Math.abs(t)," 天"):"剩余 ".concat(t," 天")})]})]}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>p(e.id),children:e.completed?"撤销":"完成"}),(0,n.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>r(e.id),className:"text-red-500",children:"删除"})]})]})},e.id)})})})]})}},2381:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var n=r(7437),a=r(2265),i=r(7053),d=r(535),s=r(3448);let o=(0,d.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:r,variant:a,size:d,asChild:l=!1,...c}=e,u=l?i.Slot:"button";return(0,n.jsx)(u,{className:(0,s.cn)(o({variant:a,size:d,className:r})),ref:t,...c})});l.displayName="Button"},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return s},Zb:function(){return d},aY:function(){return l},eW:function(){return c},ll:function(){return o}});var n=r(7437),a=r(2265),i=r(3448);let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});d.displayName="Card";let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...a})});s.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})}).displayName="CardDescription";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...a})});l.displayName="CardContent";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...a})});c.displayName="CardFooter"},3448:function(e,t,r){"use strict";r.d(t,{SD:function(){return d},_N:function(){return s},bp:function(){return o},cn:function(){return i},lY:function(){return l}});var n=r(1994),a=r(1407);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m)((0,n.W)(t))}function d(e){return new Intl.DateTimeFormat("zh-CN").format(e)}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;return Math.min(100,Math.max(0,(new Date().getTime()-e.getTime())/(315576e5*t)*100))}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90,r=new Date,n=new Date(e.getFullYear()+t,e.getMonth(),e.getDate()).getTime()-r.getTime();n<0&&(n=0);let a=Math.floor(n/1e3)%60,i=Math.floor(n/6e4)%60,d=Math.floor(n/36e5)%24,s=Math.floor(n/864e5)%30,o=Math.floor(n/2592e6)%12;return{years:Math.floor(n/315576e5),months:o,days:s,hours:d,minutes:i,seconds:a}}function l(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)}},4079:function(e,t,r){"use strict";r.d(t,{L:function(){return d}});var n=r(9625),a=r(6885),i=r(3448);let d=(0,n.Ue)()((0,a.tJ)(e=>({birthDate:null,lifeExpectancy:90,timeGoals:[],timeLogs:[],setBirthDate:t=>e({birthDate:t}),setLifeExpectancy:t=>e({lifeExpectancy:t}),addTimeGoal:t=>e(e=>({timeGoals:[...e.timeGoals,{...t,id:(0,i.lY)(),completed:!1,createdAt:new Date}]})),updateTimeGoal:(t,r)=>e(e=>({timeGoals:e.timeGoals.map(e=>e.id===t?{...e,...r}:e)})),deleteTimeGoal:t=>e(e=>({timeGoals:e.timeGoals.filter(e=>e.id!==t)})),addTimeLog:t=>e(e=>({timeLogs:[...e.timeLogs,{...t,id:(0,i.lY)(),createdAt:new Date}]})),updateTimeLog:(t,r)=>e(e=>({timeLogs:e.timeLogs.map(e=>e.id===t?{...e,...r}:e)})),deleteTimeLog:t=>e(e=>({timeLogs:e.timeLogs.filter(e=>e.id!==t)}))}),{name:"time-is-life-storage",storage:(0,a.FL)(()=>localStorage),partialize:e=>({...e,birthDate:e.birthDate?e.birthDate.toISOString():null,timeGoals:e.timeGoals.map(e=>({...e,dueDate:e.dueDate.toISOString(),createdAt:e.createdAt.toISOString()})),timeLogs:e.timeLogs.map(e=>({...e,date:e.date.toISOString(),createdAt:e.createdAt.toISOString()}))}),onRehydrateStorage:()=>e=>{e&&(e.birthDate&&(e.birthDate=new Date(e.birthDate)),e.timeGoals=e.timeGoals.map(e=>({...e,dueDate:new Date(e.dueDate),createdAt:new Date(e.createdAt)})),e.timeLogs=e.timeLogs.map(e=>({...e,date:new Date(e.date),createdAt:new Date(e.createdAt)})))}}))}},function(e){e.O(0,[287,978,971,117,744],function(){return e(e.s=162)}),_N_E=e.O()}]);