(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3651:function(e,t,r){Promise.resolve().then(r.bind(r,3105)),Promise.resolve().then(r.bind(r,1356)),Promise.resolve().then(r.bind(r,2030)),Promise.resolve().then(r.bind(r,5154)),Promise.resolve().then(r.bind(r,7012))},1356:function(e,t,r){"use strict";r.d(t,{default:function(){return o}});var n=r(7437),a=r(2265),s=r(3448),i=r(4079),l=r(3287);function o(){let{birthDate:e,lifeExpectancy:t}=(0,i.L)(),[r,o]=(0,a.useState)(0),c=2*Math.PI*85;if((0,a.useEffect)(()=>{if(!(e instanceof Date))return;let r=()=>{o((0,s._N)(e,t))};r();let n=setInterval(r,6e4);return()=>clearInterval(n)},[e,t]),!(e instanceof Date))return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,n.jsx)("p",{className:"text-center text-muted-foreground mb-4",children:"请先设置您的出生日期"}),(0,n.jsx)("svg",{width:"200",height:"200",viewBox:"0 0 200 200",children:(0,n.jsx)("circle",{cx:"100",cy:"100",r:85,fill:"none",stroke:"currentColor",strokeWidth:"10",strokeOpacity:"0.2"})})]});let d=c-r/100*c;return(0,n.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,n.jsxs)("svg",{width:"200",height:"200",viewBox:"0 0 200 200",children:[(0,n.jsx)("circle",{cx:"100",cy:"100",r:85,fill:"none",stroke:"currentColor",strokeWidth:"10",strokeOpacity:"0.2"}),(0,n.jsx)(l.E.circle,{cx:"100",cy:"100",r:85,fill:"none",stroke:"currentColor",strokeWidth:"10",strokeDasharray:c,initial:{strokeDashoffset:c},animate:{strokeDashoffset:d},transition:{duration:1},transform:"rotate(-90 100 100)",strokeLinecap:"round"}),(0,n.jsxs)("text",{x:"100",y:"100",textAnchor:"middle",dominantBaseline:"middle",className:"text-2xl font-bold",children:[r.toFixed(2),"%"]}),(0,n.jsx)("text",{x:"100",y:"125",textAnchor:"middle",dominantBaseline:"middle",className:"text-sm",children:"已度过"})]})})}},2030:function(e,t,r){"use strict";r.d(t,{default:function(){return c}});var n=r(7437),a=r(2265),s=r(3448),i=r(4079),l=r(3287);let o=e=>{let{value:t,label:r,color:a="bg-primary/10"}=e;return(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)(l.E.div,{className:(0,s.cn)("flex items-center justify-center w-20 h-20 rounded-lg text-3xl font-bold mb-2",a),initial:{scale:.95},animate:{scale:1},transition:{duration:.5},children:t}),(0,n.jsx)("span",{className:"text-sm text-muted-foreground",children:r})]})};function c(){let{birthDate:e,lifeExpectancy:t}=(0,i.L)(),[r,l]=(0,a.useState)({years:0,months:0,days:0,hours:0,minutes:0,seconds:0});return((0,a.useEffect)(()=>{if(!(e instanceof Date))return;let r=()=>{l((0,s.bp)(e,t))};r();let n=setInterval(r,1e3);return()=>clearInterval(n)},[e,t]),e instanceof Date)?(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("h2",{className:"text-xl font-medium mb-6",children:"剩余生命倒计时"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,n.jsx)(o,{value:r.years,label:"年",color:"bg-purple-100 dark:bg-purple-900/20"}),(0,n.jsx)(o,{value:r.months,label:"月",color:"bg-blue-100 dark:bg-blue-900/20"}),(0,n.jsx)(o,{value:r.days,label:"日",color:"bg-green-100 dark:bg-green-900/20"}),(0,n.jsx)(o,{value:r.hours,label:"时",color:"bg-yellow-100 dark:bg-yellow-900/20"}),(0,n.jsx)(o,{value:r.minutes,label:"分",color:"bg-orange-100 dark:bg-orange-900/20"}),(0,n.jsx)(o,{value:r.seconds,label:"秒",color:"bg-red-100 dark:bg-red-900/20"})]})]}):(0,n.jsx)("div",{className:"flex flex-col items-center justify-center py-8",children:(0,n.jsx)("p",{className:"text-center text-muted-foreground mb-4",children:"请先设置您的出生日期"})})}},5154:function(e,t,r){"use strict";r.d(t,{default:function(){return c}});var n=r(7437),a=r(2265),s=r(610),i=r(3448);let l=a.forwardRef((e,t)=>{let{className:r,value:a,...l}=e;return(0,n.jsx)(s.fC,{ref:t,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...l,children:(0,n.jsx)(s.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});l.displayName=s.fC.displayName;var o=r(4079);function c(){let{birthDate:e,lifeExpectancy:t}=(0,o.L)(),[r,s]=(0,a.useState)(0);return((0,a.useEffect)(()=>{if(!(e instanceof Date))return;let r=()=>{s((0,i._N)(e,t))};r();let n=setInterval(r,6e4);return()=>clearInterval(n)},[e,t]),e instanceof Date)?(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsxs)("span",{children:["已度过：",r.toFixed(6),"%"]}),(0,n.jsxs)("span",{children:["剩余：",(100-r).toFixed(6),"%"]})]}),(0,n.jsx)(l,{value:r,className:"h-6"})]}):(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-center text-muted-foreground",children:"请先设置您的出生日期"}),(0,n.jsx)(l,{value:0})]})}},2381:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(7437),a=r(2265),s=r(7053),i=r(535),l=r(3448);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:c=!1,...d}=e,u=c?s.Slot:"button";return(0,n.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:r})),ref:t,...d})});c.displayName="Button"},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},Zb:function(){return i},aY:function(){return c},eW:function(){return d},ll:function(){return o}});var n=r(7437),a=r(2265),s=r(3448);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-lg font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})}).displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})});d.displayName="CardFooter"},7012:function(e,t,r){"use strict";r.d(t,{default:function(){return c}});var n=r(7437),a=r(2265),s=r(2381),i=r(9820),l=r(4079),o=r(3448);function c(){let{birthDate:e,setBirthDate:t,lifeExpectancy:r,setLifeExpectancy:c}=(0,l.L)(),[d,u]=(0,a.useState)(e instanceof Date?e.toISOString().split("T")[0]:""),[f,m]=(0,a.useState)(r);return(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{children:"生命信息设置"})}),(0,n.jsx)(i.aY,{children:(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d&&t(new Date(d)),c(f)},className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{htmlFor:"birthdate",className:"block text-sm font-medium",children:"出生日期"}),(0,n.jsx)("input",{type:"date",id:"birthdate",value:d,onChange:e=>u(e.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2",required:!0}),e instanceof Date&&(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:["当前设置: ",(0,o.SD)(e)]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{htmlFor:"expectancy",className:"block text-sm font-medium",children:"预期寿命 (年)"}),(0,n.jsx)("input",{type:"number",id:"expectancy",min:1,max:150,value:f,onChange:e=>m(parseInt(e.target.value)),className:"w-full rounded-md border border-input bg-background px-3 py-2",required:!0}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"调整预期寿命以更准确地计算时间"})]}),(0,n.jsx)(i.eW,{className:"px-0 pt-4",children:(0,n.jsx)(s.z,{type:"submit",children:"保存设置"})})]})})]})}},3448:function(e,t,r){"use strict";r.d(t,{SD:function(){return i},_N:function(){return l},bp:function(){return o},cn:function(){return s},lY:function(){return c}});var n=r(1994),a=r(1407);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m)((0,n.W)(t))}function i(e){return new Intl.DateTimeFormat("zh-CN").format(e)}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;return Math.min(100,Math.max(0,(new Date().getTime()-e.getTime())/(315576e5*t)*100))}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90,r=new Date,n=new Date(e.getFullYear()+t,e.getMonth(),e.getDate()).getTime()-r.getTime();n<0&&(n=0);let a=Math.floor(n/1e3)%60,s=Math.floor(n/6e4)%60,i=Math.floor(n/36e5)%24,l=Math.floor(n/864e5)%30,o=Math.floor(n/2592e6)%12;return{years:Math.floor(n/315576e5),months:o,days:l,hours:i,minutes:s,seconds:a}}function c(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)}},4079:function(e,t,r){"use strict";r.d(t,{L:function(){return i}});var n=r(9625),a=r(6885),s=r(3448);let i=(0,n.Ue)()((0,a.tJ)(e=>({birthDate:null,lifeExpectancy:90,timeGoals:[],timeLogs:[],setBirthDate:t=>e({birthDate:t}),setLifeExpectancy:t=>e({lifeExpectancy:t}),addTimeGoal:t=>e(e=>({timeGoals:[...e.timeGoals,{...t,id:(0,s.lY)(),completed:!1,createdAt:new Date}]})),updateTimeGoal:(t,r)=>e(e=>({timeGoals:e.timeGoals.map(e=>e.id===t?{...e,...r}:e)})),deleteTimeGoal:t=>e(e=>({timeGoals:e.timeGoals.filter(e=>e.id!==t)})),addTimeLog:t=>e(e=>({timeLogs:[...e.timeLogs,{...t,id:(0,s.lY)(),createdAt:new Date}]})),updateTimeLog:(t,r)=>e(e=>({timeLogs:e.timeLogs.map(e=>e.id===t?{...e,...r}:e)})),deleteTimeLog:t=>e(e=>({timeLogs:e.timeLogs.filter(e=>e.id!==t)}))}),{name:"time-is-life-storage",storage:(0,a.FL)(()=>localStorage),partialize:e=>({...e,birthDate:e.birthDate?e.birthDate.toISOString():null,timeGoals:e.timeGoals.map(e=>({...e,dueDate:e.dueDate.toISOString(),createdAt:e.createdAt.toISOString()})),timeLogs:e.timeLogs.map(e=>({...e,date:e.date.toISOString(),createdAt:e.createdAt.toISOString()}))}),onRehydrateStorage:()=>e=>{e&&(e.birthDate&&(e.birthDate=new Date(e.birthDate)),e.timeGoals=e.timeGoals.map(e=>({...e,dueDate:new Date(e.dueDate),createdAt:new Date(e.createdAt)})),e.timeLogs=e.timeLogs.map(e=>({...e,date:new Date(e.date),createdAt:new Date(e.createdAt)})))}}))}},function(e){e.O(0,[287,978,990,971,117,744],function(){return e(e.s=3651)}),_N_E=e.O()}]);