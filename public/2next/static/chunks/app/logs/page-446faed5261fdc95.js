(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{6172:function(e,t,a){Promise.resolve().then(a.bind(a,4328)),Promise.resolve().then(a.bind(a,3982))},4328:function(e,t,a){"use strict";a.d(t,{default:function(){return c}});var r=a(7437),n=a(2265),s=a(2381),l=a(9820),i=a(4079);let o=[{value:"good",label:"好心情"},{value:"neutral",label:"一般"},{value:"bad",label:"不太好"}],d=["工作","学习","运动","娱乐","家庭","社交","休息","反思"];function c(){let{addTimeLog:e}=(0,i.L)(),[t,a]=(0,n.useState)({content:"",mood:"neutral",date:new Date().toISOString().split("T")[0],tags:[],customTag:""}),c=e=>{let{name:t,value:r}=e.target;a(e=>({...e,[t]:r}))},u=e=>{a(t=>{let a=t.tags.includes(e)?t.tags.filter(t=>t!==e):[...t.tags,e];return{...t,tags:a}})};return(0,r.jsxs)(l.Zb,{children:[(0,r.jsx)(l.Ol,{children:(0,r.jsx)(l.ll,{children:"记录今日时间日志"})}),(0,r.jsx)(l.aY,{children:(0,r.jsxs)("form",{onSubmit:r=>{r.preventDefault(),e({content:t.content,mood:t.mood,date:new Date(t.date),tags:t.tags}),a({content:"",mood:"neutral",date:new Date().toISOString().split("T")[0],tags:[],customTag:""})},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium",children:"日期"}),(0,r.jsx)("input",{id:"date",name:"date",type:"date",value:t.date,onChange:c,className:"w-full rounded-md border border-input bg-background px-3 py-2",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium",children:"内容"}),(0,r.jsx)("textarea",{id:"content",name:"content",value:t.content,onChange:c,rows:5,placeholder:"记录今天的感想、收获或者反思...",className:"w-full rounded-md border border-input bg-background px-3 py-2",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"mood",className:"block text-sm font-medium",children:"今日心情"}),(0,r.jsx)("select",{id:"mood",name:"mood",value:t.mood,onChange:c,className:"w-full rounded-md border border-input bg-background px-3 py-2",children:o.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"标签"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:d.map(e=>(0,r.jsx)(s.z,{type:"button",variant:t.tags.includes(e)?"default":"outline",size:"sm",onClick:()=>u(e),children:e},e))}),(0,r.jsxs)("div",{className:"flex mt-2",children:[(0,r.jsx)("input",{type:"text",value:t.customTag,onChange:e=>a(t=>({...t,customTag:e.target.value})),placeholder:"添加自定义标签",className:"flex-1 rounded-l-md border border-input bg-background px-3 py-2"}),(0,r.jsx)(s.z,{type:"button",onClick:()=>{t.customTag.trim()&&!t.tags.includes(t.customTag.trim())&&a(e=>({...e,tags:[...e.tags,e.customTag.trim()],customTag:""}))},className:"rounded-l-none",disabled:!t.customTag.trim(),children:"添加"})]}),t.tags.length>0&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"已选标签:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:t.tags.map(e=>(0,r.jsxs)("span",{className:"px-2 py-1 text-xs rounded-full bg-primary/10 inline-flex items-center",children:[e,(0,r.jsx)("button",{type:"button",onClick:()=>u(e),className:"ml-1 h-4 w-4 rounded-full bg-muted flex items-center justify-center text-muted-foreground",children:"✕"})]},e))})]})]}),(0,r.jsx)(l.eW,{className:"px-0 pt-4",children:(0,r.jsx)(s.z,{type:"submit",children:"保存日志"})})]})})]})}},3982:function(e,t,a){"use strict";a.d(t,{default:function(){return c}});var r=a(7437),n=a(2265),s=a(2381),l=a(9820),i=a(4079),o=a(3448),d=a(3287);function c(){let{timeLogs:e,deleteTimeLog:t}=(0,i.L)(),[a,c]=(0,n.useState)("all"),u=[...e].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),m=Array.from(new Set(e.flatMap(e=>e.tags))),f=u.filter(e=>"all"===a||("good"===a||"neutral"===a||"bad"===a?e.mood===a:e.tags.includes(a))),g=e=>{switch(e){case"good":return"bg-green-50 dark:bg-green-900/10 border-green-200 dark:border-green-900/20";case"bad":return"bg-red-50 dark:bg-red-900/10 border-red-200 dark:border-red-900/20";default:return"bg-blue-50 dark:bg-blue-900/10 border-blue-200 dark:border-blue-900/20"}},x=e=>{switch(e){case"good":return"\uD83D\uDE0A";case"bad":return"\uD83D\uDE14";default:return"\uD83D\uDE10"}};return(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsx)(l.ll,{children:"您的时间日志"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,r.jsx)(s.z,{variant:"all"===a?"default":"outline",size:"sm",onClick:()=>c("all"),children:"全部"}),(0,r.jsx)(s.z,{variant:"good"===a?"default":"outline",size:"sm",onClick:()=>c("good"),children:"好心情 \uD83D\uDE0A"}),(0,r.jsx)(s.z,{variant:"neutral"===a?"default":"outline",size:"sm",onClick:()=>c("neutral"),children:"一般 \uD83D\uDE10"}),(0,r.jsx)(s.z,{variant:"bad"===a?"default":"outline",size:"sm",onClick:()=>c("bad"),children:"不好 \uD83D\uDE14"}),m.map(e=>(0,r.jsxs)(s.z,{variant:a===e?"default":"outline",size:"sm",onClick:()=>c(e),children:["#",e]},e))]})]}),(0,r.jsx)(l.aY,{children:0===f.length?(0,r.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"all"===a?"还没有记录任何日志，开始添加一个吧!":"没有符合当前筛选条件的日志。"}):(0,r.jsx)("ul",{className:"space-y-4",children:f.map(e=>(0,r.jsx)(d.E.li,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-md border ".concat(g(e.mood)),children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("time",{className:"text-sm font-medium",children:(0,o.SD)(e.date)}),(0,r.jsx)("span",{className:"text-xl",title:e.mood,children:x(e.mood)})]}),(0,r.jsx)("p",{className:"whitespace-pre-line",children:e.content}),e.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-3",children:e.tags.map(e=>(0,r.jsxs)("span",{className:"px-2 py-0.5 text-xs rounded-full bg-primary/10 inline-flex items-center",children:["#",e]},e))})]}),(0,r.jsx)(s.z,{variant:"ghost",size:"sm",onClick:()=>t(e.id),className:"text-red-500",children:"删除"})]})},e.id))})})]})}},2381:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var r=a(7437),n=a(2265),s=a(7053),l=a(535),i=a(3448);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:a,variant:n,size:l,asChild:d=!1,...c}=e,u=d?s.Slot:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:n,size:l,className:a})),ref:t,...c})});d.displayName="Button"},9820:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},Zb:function(){return l},aY:function(){return d},eW:function(){return c},ll:function(){return o}});var r=a(7437),n=a(2265),s=a(3448);let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});l.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("h3",{ref:t,className:(0,s.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});o.displayName="CardTitle",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...n})}).displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...n})});d.displayName="CardContent";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...n})});c.displayName="CardFooter"},3448:function(e,t,a){"use strict";a.d(t,{SD:function(){return l},_N:function(){return i},bp:function(){return o},cn:function(){return s},lY:function(){return d}});var r=a(1994),n=a(1407);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m)((0,r.W)(t))}function l(e){return new Intl.DateTimeFormat("zh-CN").format(e)}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;return Math.min(100,Math.max(0,(new Date().getTime()-e.getTime())/(315576e5*t)*100))}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90,a=new Date,r=new Date(e.getFullYear()+t,e.getMonth(),e.getDate()).getTime()-a.getTime();r<0&&(r=0);let n=Math.floor(r/1e3)%60,s=Math.floor(r/6e4)%60,l=Math.floor(r/36e5)%24,i=Math.floor(r/864e5)%30,o=Math.floor(r/2592e6)%12;return{years:Math.floor(r/315576e5),months:o,days:i,hours:l,minutes:s,seconds:n}}function d(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)}},4079:function(e,t,a){"use strict";a.d(t,{L:function(){return l}});var r=a(9625),n=a(6885),s=a(3448);let l=(0,r.Ue)()((0,n.tJ)(e=>({birthDate:null,lifeExpectancy:90,timeGoals:[],timeLogs:[],setBirthDate:t=>e({birthDate:t}),setLifeExpectancy:t=>e({lifeExpectancy:t}),addTimeGoal:t=>e(e=>({timeGoals:[...e.timeGoals,{...t,id:(0,s.lY)(),completed:!1,createdAt:new Date}]})),updateTimeGoal:(t,a)=>e(e=>({timeGoals:e.timeGoals.map(e=>e.id===t?{...e,...a}:e)})),deleteTimeGoal:t=>e(e=>({timeGoals:e.timeGoals.filter(e=>e.id!==t)})),addTimeLog:t=>e(e=>({timeLogs:[...e.timeLogs,{...t,id:(0,s.lY)(),createdAt:new Date}]})),updateTimeLog:(t,a)=>e(e=>({timeLogs:e.timeLogs.map(e=>e.id===t?{...e,...a}:e)})),deleteTimeLog:t=>e(e=>({timeLogs:e.timeLogs.filter(e=>e.id!==t)}))}),{name:"time-is-life-storage",storage:(0,n.FL)(()=>localStorage),partialize:e=>({...e,birthDate:e.birthDate?e.birthDate.toISOString():null,timeGoals:e.timeGoals.map(e=>({...e,dueDate:e.dueDate.toISOString(),createdAt:e.createdAt.toISOString()})),timeLogs:e.timeLogs.map(e=>({...e,date:e.date.toISOString(),createdAt:e.createdAt.toISOString()}))}),onRehydrateStorage:()=>e=>{e&&(e.birthDate&&(e.birthDate=new Date(e.birthDate)),e.timeGoals=e.timeGoals.map(e=>({...e,dueDate:new Date(e.dueDate),createdAt:new Date(e.createdAt)})),e.timeLogs=e.timeLogs.map(e=>({...e,date:new Date(e.date),createdAt:new Date(e.createdAt)})))}}))}},function(e){e.O(0,[287,978,971,117,744],function(){return e(e.s=6172)}),_N_E=e.O()}]);