(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{1822:function(e,t,r){Promise.resolve().then(r.bind(r,7053)),Promise.resolve().then(r.bind(r,7012))},2381:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var a=r(7437),n=r(2265),i=r(7053),o=r(535),s=r(3448);let d=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:r,variant:n,size:o,asChild:l=!1,...c}=e,u=l?i.Slot:"button";return(0,a.jsx)(u,{className:(0,s.cn)(d({variant:n,size:o,className:r})),ref:t,...c})});l.displayName="Button"},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return s},Zb:function(){return o},aY:function(){return l},eW:function(){return c},ll:function(){return d}});var a=r(7437),n=r(2265),i=r(3448);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});o.displayName="Card";let s=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...n})});s.displayName="CardHeader";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",r),...n})});d.displayName="CardTitle",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...n})}).displayName="CardDescription";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...n})});l.displayName="CardContent";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...n})});c.displayName="CardFooter"},7012:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var a=r(7437),n=r(2265),i=r(2381),o=r(9820),s=r(4079),d=r(3448);function l(){let{birthDate:e,setBirthDate:t,lifeExpectancy:r,setLifeExpectancy:l}=(0,s.L)(),[c,u]=(0,n.useState)(e instanceof Date?e.toISOString().split("T")[0]:""),[m,f]=(0,n.useState)(r);return(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{children:"生命信息设置"})}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c&&t(new Date(c)),l(m)},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"birthdate",className:"block text-sm font-medium",children:"出生日期"}),(0,a.jsx)("input",{type:"date",id:"birthdate",value:c,onChange:e=>u(e.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2",required:!0}),e instanceof Date&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["当前设置: ",(0,d.SD)(e)]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"expectancy",className:"block text-sm font-medium",children:"预期寿命 (年)"}),(0,a.jsx)("input",{type:"number",id:"expectancy",min:1,max:150,value:m,onChange:e=>f(parseInt(e.target.value)),className:"w-full rounded-md border border-input bg-background px-3 py-2",required:!0}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"调整预期寿命以更准确地计算时间"})]}),(0,a.jsx)(o.eW,{className:"px-0 pt-4",children:(0,a.jsx)(i.z,{type:"submit",children:"保存设置"})})]})})]})}},3448:function(e,t,r){"use strict";r.d(t,{SD:function(){return o},_N:function(){return s},bp:function(){return d},cn:function(){return i},lY:function(){return l}});var a=r(1994),n=r(1407);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m)((0,a.W)(t))}function o(e){return new Intl.DateTimeFormat("zh-CN").format(e)}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;return Math.min(100,Math.max(0,(new Date().getTime()-e.getTime())/(315576e5*t)*100))}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90,r=new Date,a=new Date(e.getFullYear()+t,e.getMonth(),e.getDate()).getTime()-r.getTime();a<0&&(a=0);let n=Math.floor(a/1e3)%60,i=Math.floor(a/6e4)%60,o=Math.floor(a/36e5)%24,s=Math.floor(a/864e5)%30,d=Math.floor(a/2592e6)%12;return{years:Math.floor(a/315576e5),months:d,days:s,hours:o,minutes:i,seconds:n}}function l(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)}},4079:function(e,t,r){"use strict";r.d(t,{L:function(){return o}});var a=r(9625),n=r(6885),i=r(3448);let o=(0,a.Ue)()((0,n.tJ)(e=>({birthDate:null,lifeExpectancy:90,timeGoals:[],timeLogs:[],setBirthDate:t=>e({birthDate:t}),setLifeExpectancy:t=>e({lifeExpectancy:t}),addTimeGoal:t=>e(e=>({timeGoals:[...e.timeGoals,{...t,id:(0,i.lY)(),completed:!1,createdAt:new Date}]})),updateTimeGoal:(t,r)=>e(e=>({timeGoals:e.timeGoals.map(e=>e.id===t?{...e,...r}:e)})),deleteTimeGoal:t=>e(e=>({timeGoals:e.timeGoals.filter(e=>e.id!==t)})),addTimeLog:t=>e(e=>({timeLogs:[...e.timeLogs,{...t,id:(0,i.lY)(),createdAt:new Date}]})),updateTimeLog:(t,r)=>e(e=>({timeLogs:e.timeLogs.map(e=>e.id===t?{...e,...r}:e)})),deleteTimeLog:t=>e(e=>({timeLogs:e.timeLogs.filter(e=>e.id!==t)}))}),{name:"time-is-life-storage",storage:(0,n.FL)(()=>localStorage),partialize:e=>({...e,birthDate:e.birthDate?e.birthDate.toISOString():null,timeGoals:e.timeGoals.map(e=>({...e,dueDate:e.dueDate.toISOString(),createdAt:e.createdAt.toISOString()})),timeLogs:e.timeLogs.map(e=>({...e,date:e.date.toISOString(),createdAt:e.createdAt.toISOString()}))}),onRehydrateStorage:()=>e=>{e&&(e.birthDate&&(e.birthDate=new Date(e.birthDate)),e.timeGoals=e.timeGoals.map(e=>({...e,dueDate:new Date(e.dueDate),createdAt:new Date(e.createdAt)})),e.timeLogs=e.timeLogs.map(e=>({...e,date:new Date(e.date),createdAt:new Date(e.createdAt)})))}}))}},function(e){e.O(0,[978,971,117,744],function(){return e(e.s=1822)}),_N_E=e.O()}]);